CONFIGURAÇÕES INICIAIS

Clonar VM padrão com ubuntu 22.04 instalado.

user: andre
password: 12345678

Sofware Updater -> atualizar sistema.
sudo apt-get update


INSTALAR TELEGRAF

sudo wget https://dl.influxdata.com/telegraf/releases/telegraf-1.28.4_linux_amd64.tar.gz
sudo tar xf telegraf-1.28.4_linux_amd64.tar.gz
sudo apt install telegraf
sudo systemctl enable --now telegraf
sudo  systemctl status telegraf

INSTALAR INFLUXDB

sudo apt-get update && sudo apt-get install influxdb
sudo systemctl unmask influxdb.service
sudo systemctl start influxdb
sudo systemctl status influxdb

INSTALAR GRAFANA

sudo apt install -y adduser libfontconfig1
sudo wget https://dl.grafana.com/oss/release/grafana_7.0.1_amd64.deb
sudo dpkg -i grafana_7.0.1_amd64.deb
sudo systemctl daemon-reload
sudo systemctl enable --now grafana-server
sudo systemctl status grafana-server

CONFIGURAR INFLUXDB PARA ARMAZENAR DADOS COLETADOS PELO TELEGRAF

sudo apt install influxdb-client
sudo influx
CREATE database telegraf
CREATE user telegraf with password 'myPassword'
GRANT all on telegraf to telegraf
SHOW databases
exit

sudo influx -username 'telegraf' password '' -database telegraf
myPassword
exit


CONFIGURAR TELEGRAF PARA COLETAR DADOS

###############################################################################
#                            OUTPUT PLUGINS                                   #
###############################################################################


# Configuration for sending metrics to InfluxDB
[[outputs.influxdb]]
  urls = ["http://127.0.0.1:8086"]
  database = "telegraf"
  username = "telegraf"
  password = "myP@SSword"





